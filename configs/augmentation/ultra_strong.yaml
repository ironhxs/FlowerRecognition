# Ultra Strong Data Augmentation for Flower Recognition
# Specially optimized for flower classification with diverse augmentations

# Training augmentations
train:
  # Geometric transforms - Flowers can be photographed from any angle
  - RandomResizedCrop:
      size: [600, 600]  # Must be tuple format
      scale: [0.6, 1.0]  # More aggressive cropping
      ratio: [0.85, 1.15]
  - RandomHorizontalFlip:
      p: 0.5
  - RandomVerticalFlip:
      p: 0.5  # Increased for flowers
  - RandomRotate90:  # Flowers have no fixed orientation
      p: 0.5
  - ShiftScaleRotate:
      shift_limit: 0.15
      scale_limit: 0.2
      rotate_limit: 180  # Full rotation for flowers
      p: 0.6
  
  # Color augmentations - Critical for flower recognition
  - HueSaturationValue:  # Flowers vary greatly in color
      hue_shift_limit: 25
      sat_shift_limit: 40
      val_shift_limit: 25
      p: 0.6
  - ColorJitter:
      brightness: 0.4
      contrast: 0.4
      saturation: 0.4
      hue: 0.15
      p: 0.6
  - RandomBrightnessContrast:
      brightness_limit: 0.3
      contrast_limit: 0.3
      p: 0.5
  - RandomGamma:  # Handle different lighting conditions
      gamma_limit: [80, 120]
      p: 0.3
  
  # Texture and detail augmentations
  - GaussianBlur:
      blur_limit: [3, 7]
      p: 0.2
  
  - GaussNoise:
      var_limit: [10, 60]
      p: 0.2
  
  # Advanced augmentations
  - ElasticTransform:  # Natural flower deformations
      alpha: 1
      sigma: 50
      alpha_affine: 50
      p: 0.2
  
  - GridDistortion:  # Simulate perspective changes
      num_steps: 5
      distort_limit: 0.3
      p: 0.2
  
  - CoarseDropout:  # Cutout for robustness
      max_holes: 8
      max_height: 40
      max_width: 40
      min_holes: 1
      min_height: 20
      min_width: 20
      fill_value: 0
      p: 0.4
  
  # Rare but useful
  - RandomShadow:  # Outdoor flower photos
      shadow_roi: [0, 0.5, 1, 1]
      num_shadows_lower: 1
      num_shadows_upper: 2
      shadow_dimension: 5
      p: 0.2
  
  - RandomFog:  # Weather conditions
      fog_coef_lower: 0.1
      fog_coef_upper: 0.3
      alpha_coef: 0.08
      p: 0.1
  
  # Normalization (ImageNet stats) - Always last
  - Normalize:
      mean: [0.485, 0.456, 0.406]
      std: [0.229, 0.224, 0.225]

# Validation/Test augmentations (minimal)
val:
  - Resize:
      height: 600
      width: 600
  - Normalize:
      mean: [0.485, 0.456, 0.406]
      std: [0.229, 0.224, 0.225]
